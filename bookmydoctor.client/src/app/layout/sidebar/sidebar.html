<nav class="sidebar" [class.open]="isOpen" [class.collapsed]="isCollapsed">
  <div class="sidebar-header">
    <div class="sidebar-brand">
      <div class="brand-icon" (click)="toggleCollapse()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
      <span class="brand-text">{{sidebarTitle}}</span>
    </div>
    <button class="collapse-btn" (click)="toggleCollapse()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
      </svg>
    </button>
  </div>

  <div class="sidebar-content">
    @if (userRole === 'Admin') {
      <div class="nav-section">
        <h3 class="nav-title">Admin Dashboard</h3>
        <ul class="nav-menu">
          <li class="nav-item">
            <a routerLink="/dashboard/admin" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
              </svg>
              <span class="nav-text">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/admin/doctors" [class.active]="isRouteActive('/admin/doctors')" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 8h6v2H4zm0 4h6v2H4zm0 4h6v2H4z"/>
              </svg>
              <span class="nav-text">Doctors</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/admin/patients" [class.active]="isRouteActive('/admin/patients')" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              <span class="nav-text">Patients</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/admin/clinics" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <span class="nav-text">Clinics</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/admin/appointments" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
              </svg>
              <span class="nav-text">Appointments</span>
            </a>
          </li>
        </ul>
      </div>
    }

    @if (userRole === 'Doctor') {
      <div class="nav-section">
        <h3 class="nav-title">Doctor Dashboard</h3>
        <ul class="nav-menu">
          <li class="nav-item">
            <a routerLink="/dashboard/doctor" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
              </svg>
              <span class="nav-text">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/doctor/appointments" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
              </svg>
              <span class="nav-text">Appointments</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/doctor/calendar" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM4 21V8h16v13H4z"/>
              </svg>
              <span class="nav-text">Calendar</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/doctor/profile" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
              <span class="nav-text">Profile</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/doctor/notifications" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
              </svg>
              <span class="nav-text">Notifications</span>
            </a>
          </li>
        </ul>
      </div>
    }

    @if (userRole === 'Patient') {
      <div class="nav-section">
        <h3 class="nav-title">Patient Dashboard</h3>
        <ul class="nav-menu">
          <li class="nav-item">
            <a routerLink="/dashboard/patient" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
              </svg>
              <span class="nav-text">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/doctor-search" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
              </svg>
              <span class="nav-text">Find Doctors</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/nearby-clinics" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
              <span class="nav-text">Nearby Clinics</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/appointments" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
              </svg>
              <span class="nav-text">My Appointments</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/book-appointment" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 8h6v2H4zm0 4h6v2H4zm0 4h6v2H4z"/>
              </svg>
              <span class="nav-text">Book Appointment</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/profile" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
              <span class="nav-text">Profile</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/notifications" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
              </svg>
              <span class="nav-text">Notifications</span>
            </a>
          </li>
          <li class="nav-item">
            <a routerLink="/patient/payment-history" routerLinkActive="active" class="nav-link">
              <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
              </svg>
              <span class="nav-text">Payment History</span>
            </a>
          </li>
        </ul>
      </div>
    }
  </div>

  <div class="sidebar-footer">
    <div class="nav-section">
      <ul class="nav-menu">
        <li class="nav-item">
          <button class="nav-link logout-btn" (click)="logout()">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
            </svg>
            <span class="nav-text">Logout</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Mobile overlay -->
@if (isMobile && isOpen) {
  <div class="sidebar-overlay" (click)="close()"></div>
}