<div class="dashboard-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Admin Dashboard</h1>
      <p class="page-subtitle">Manage your healthcare system efficiently</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-primary" (click)="refreshDashboard()" [disabled]="isLoading">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" [class.spinning]="isLoading">
          <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
        </svg>
        {{ isLoading ? 'Loading...' : 'Refresh' }}
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div class="error-message" *ngIf="error">
    <div class="error-content">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
      </svg>
      <span>{{ error }}</span>
      <button class="retry-btn" (click)="refreshDashboard()">Retry</button>
    </div>
  </div>

  <!-- Dashboard Summary Cards -->
  <div class="summary-section">
    <h2 class="section-title">Overview</h2>
    
    <!-- Loading Skeleton -->
    <div class="summary-grid" *ngIf="isLoading">
      <div class="card summary-card skeleton-card" *ngFor="let item of [1,2,3,4]">
        <div class="card-body">
          <div class="skeleton-header">
            <div class="skeleton-text skeleton-title"></div>
            <div class="skeleton-icon"></div>
          </div>
          <div class="skeleton-value"></div>
          <div class="skeleton-trend"></div>
        </div>
      </div>
    </div>
    
    <!-- Actual Data -->
    <div class="summary-grid" *ngIf="!isLoading && dashboardSummary">
      <div class="card summary-card patients-card" (click)="viewUsers()">
        <div class="card-body">
          <div class="summary-header">
            <div class="summary-info">
              <h3>Total Patients</h3>
              <p class="summary-subtitle">Registered Users</p>
            </div>
            <div class="summary-icon patients">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 7c0-2.21-1.79-4-4-4S8 4.79 8 7s1.79 4 4 4 4-1.79 4-4zm-4 7c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
            </div>
          </div>
          <div class="summary-value">{{dashboardSummary.totalPatients || 0}}</div>
          <div class="summary-footer">
            <button class="view-btn">View All</button>
          </div>
        </div>
      </div>

      <div class="card summary-card doctors-card" (click)="viewDoctors()">
        <div class="card-body">
          <div class="summary-header">
            <div class="summary-info">
              <h3>Total Doctors</h3>
              <p class="summary-subtitle">Active Practitioners</p>
            </div>
            <div class="summary-icon doctors">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 8h-2v3h-3v2h3v3h2v-3h3v-2h-3zM4 8h6v2H4zm0 4h6v2H4zm0 4h6v2H4z"/>
              </svg>
            </div>
          </div>
          <div class="summary-value">{{dashboardSummary.totalDoctors || 0}}</div>
          <div class="summary-footer">
            <button class="view-btn">Manage</button>
          </div>
        </div>
      </div>

      <div class="card summary-card appointments-card" (click)="viewAppointments()">
        <div class="card-body">
          <div class="summary-header">
            <div class="summary-info">
              <h3>Appointments</h3>
              <p class="summary-subtitle">This Month</p>
            </div>
            <div class="summary-icon appointments">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
              </svg>
            </div>
          </div>
          <div class="summary-value">{{dashboardSummary.totalAppointments || 0}}</div>
          <div class="summary-footer">
            <button class="view-btn">View Calendar</button>
          </div>
        </div>
      </div>

      <div class="card summary-card revenue-card">
        <div class="card-body">
          <div class="summary-header">
            <div class="summary-info">
              <h3>Revenue</h3>
              <p class="summary-subtitle">Total Earnings</p>
            </div>
            <div class="summary-icon revenue">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
              </svg>
            </div>
          </div>
          <div class="summary-value">â‚¹{{dashboardSummary.totalRevenue | number:'1.0-0'}}</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pending Approvals Section -->
  <div class="pending-section" *ngIf="dashboardSummary?.pendingDoctors && (dashboardSummary?.pendingDoctors?.length || 0) > 0">
    <div class="section-header">
      <h2 class="section-title">Pending Doctor Approvals</h2>
      <span class="badge badge-warning">{{ dashboardSummary?.pendingDoctors?.length || 0 }} pending</span>
    </div>
    
    <div class="pending-grid">
      <div class="pending-card card" *ngFor="let doctor of dashboardSummary?.pendingDoctors">
        <div class="card-body">
          <div class="doctor-info">
            <div class="doctor-avatar">
              <div class="avatar-circle">
                {{ getDoctorInitials(doctor.userName) }}
              </div>
            </div>
            <div class="doctor-details">
              <h3 class="doctor-name">{{ doctor.userName }}</h3>
              <p class="doctor-specialty">{{ doctor.specialty || 'General Practitioner' }}</p>
              <div class="doctor-meta">
                <span class="meta-item">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                  </svg>
                  {{ doctor.email }}
                </span>
                <span class="meta-item">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                  </svg>
                  {{ doctor.experienceYears || 0 }} years experience
                </span>
              </div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-success btn-sm" (click)="approveDoctor(doctor)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
              </svg>
              Approve
            </button>
            <button class="btn btn-secondary btn-sm" (click)="viewDoctorDetails(doctor)">
              View Details
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>